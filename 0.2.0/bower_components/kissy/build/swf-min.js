/*
Copyright 2014, KISSY v1.44
MIT Licensed
build time: May 22 12:31
*/
KISSY.add("swf/ua",[],function(h){function j(b){var i="string"===typeof b?b.match(/\d+/g).splice(0,3):b;h.isArray(i)&&(b=parseFloat(i[0]+"."+m(i[1],3)+m(i[2],5)));return b||0}function m(b,i){var b=(b||0)+"",h=i+1-b.length;return Array(0<h?h:0).join("0")+b}function k(h){if(h||l){l=!1;var i;if(navigator.plugins&&navigator.mimeTypes.length)i=(navigator.plugins["Shockwave Flash"]||0).description;else try{i=(new b.ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(k){}q=!i?void 0:
i.match(/\d+/g).splice(0,3)}return q}var q,l=!0,b=h.Env.host;return{fpv:k,fpvGTE:function(b,h){return j(k(h))>=j(b)}}});
KISSY.add("swf",["dom","json","attribute","swf/ua"],function(h,j){function m(a){var d=g;h.each(a,function(a,c){c=c.toLowerCase();c in z?d+=l(c,a):c===A&&(d+=l(c,q(a)))});return d}function k(a,d,e,c){var b=g,f=g;h.each(d,function(a,c){b+=" "+c+'="'+a+'"'});c?(b+=' classid="'+B+'"',f+=l("movie",a)):(b+=' data="'+a+'"',b+=' type="'+C+'"');f+=m(e);return r+s+b+t+f}function q(a){var b=[];h.each(a,function(a,c){"string"!==typeof a&&(a=y.stringify(a));a&&b.push(c+"="+D(a))});return b.join("&")}function l(a,
b){return'<param name="'+a+'" value="'+b+'"></param>'}var b=j("dom"),y=j("json"),i=j("attribute"),v=j("swf/ua"),o=!!h.Env.host.ActiveXObject,C="application/x-shockwave-flash",B="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",A="flashvars",g="",r="<",t=">",E=h.Env.host.document,w=v.fpv,F=v.fpvGEQ,x=v.fpvGTE,s="object",D=encodeURIComponent,z={wmode:g,allowscriptaccess:g,allownetworking:g,allowfullscreen:g,play:"false",loop:g,menu:g,quality:g,scale:g,salign:g,bgcolor:g,devicefont:g,hasPriority:g,base:g,
swliveconnect:g,seamlesstabbing:g},u;return u=i.extend({constructor:function(a){this.callSuper(a);var d=this.get("expressInstall"),e,c,g,a=this.get("htmlMode");c=this.get("params");var f=this.get("attrs"),i=this.get("document"),j=b.create("<span>",void 0,i),l=this.get("elBefore"),n=this.get("src"),m=!("id"in f),p=this.get("version");g=f.id=f.id||h.guid("ks-swf-");m&&(e=RegExp("\\s+id\\s*=\\s*['\"]?"+h.escapeRegExp(g)+"['\"]?","i"));if(w()){if(p&&!x(p)&&(this.set("status",u.Status.TOO_LOW),d)){n=d;
if(!("width"in f)||!/%$/.test(f.width)&&310>parseInt(f.width,10))f.width="310";if(!("height"in f)||!/%$/.test(f.height)&&137>parseInt(f.height,10))f.height="137";d=c.flashVars=c.flashVars||{};h.mix(d,{MMredirectURL:location.href,MMplayerType:o?"ActiveX":"PlugIn",MMdoctitle:i.title.slice(0,47)+" - Flash Player Installation"})}"full"===a?(o?(d=k(n,f,c,1),delete f.id,delete f.style,p=k(n,f,c,0)):(p=k(n,f,c,0),delete f.id,delete f.style,d=k(n,f,c,1)),c=d+p+r+"/"+s+t+r+"/"+s+t):c=k(n,f,c,o)+r+"/"+s+t;
this.set("html",e?c.replace(e,""):c);l?b.insertBefore(j,l):b.append(j,this.get("render"));"outerHTML"in j?j.outerHTML=c:j.parentNode.replaceChild(b.create(c),j);e=b.get("#"+g,i);"full"===a?o?this.set("swfObject",e):this.set("swfObject",e.parentNode):this.set("swfObject",e);m&&b.removeAttr(e,"id");this.set("el",e);this.get("status")||this.set("status",u.Status.SUCCESS)}else this.set("status",u.Status.NOT_INSTALLED)},callSWF:function(a,b){var e=this.get("el"),c,b=b||[];try{e[a]&&(c=e[a].apply(e,b))}catch(g){c=
"",0!==b.length&&(c='"'+b.join('", "')+'"'),c=(new Function("swf","return swf."+a+"("+c+");"))(e)}return c},destroy:function(){var a=this.get("swfObject");o?(a.style.display="none",function e(){if(4===a.readyState){for(var b in a)"function"===typeof a[b]&&(a[b]=null);a.parentNode.removeChild(a)}else setTimeout(e,10)}()):a.parentNode.removeChild(a)}},{ATTRS:{expressInstall:{value:h.config("base")+"swf/assets/expressInstall.swf"},src:{},version:{value:"9"},params:{value:{}},attrs:{value:{}},render:{setter:function(a){"string"===
typeof a&&(a=b.get(a,this.get("document")));return a},valueFn:function(){return document.body}},elBefore:{setter:function(a){"string"===typeof a&&(a=b.get(a,this.get("document")));return a}},document:{value:E},status:{},el:{},swfObject:{},html:{},htmlMode:{value:"default"}},getSrc:function(a){var d=a=b.get(a),e="",c,a=[],e=b.nodeName(d);if("object"===e){(e=b.attr(d,"data"))&&a.push(d);d=d.childNodes;for(e=0;e<d.length;e++)c=d[e],1===c.nodeType&&("movie"===(b.attr(c,"name")||"").toLowerCase()?a.push(c):
"embed"===b.nodeName(c)?a.push(c):"object"===b.nodeName(d[e])&&a.push(c))}else"embed"===e&&a.push(d);d=(a=a[0])&&b.nodeName(a);return"embed"===d?b.attr(a,"src"):"object"===d?b.attr(a,"data"):"param"===d?b.attr(a,"value"):null},Status:{TOO_LOW:"flash version is too low",NOT_INSTALLED:"flash is not installed",SUCCESS:"success"},HtmlMode:{DEFAULT:"default",FULL:"full"},fpv:w,fpvGEQ:F,fpvGTE:x})});
